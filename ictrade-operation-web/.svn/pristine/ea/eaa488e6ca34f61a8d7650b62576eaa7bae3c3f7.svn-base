var vm;
var addData;
var recommendationId = getQueryString("recommendationId");
var action=getQueryString("action");

$(function() {
	var validate= false;
	vm = new Vue({
			        el: '#advertise_edit',
			        data: {
			        	onlyRead:false,
						initData : {
							categoryId : '',  //这里定义的，是干嘛的
							attachUrl1:'',
							title:''
						},
						recommendationId: getQueryString('recommendationId'),
						checkModel : {},
					    query:"",
					    first:"",
					    url:'',//详情链接
					    info:{
					    	"categoryId": "6001",       //广告类型
						    "categoryTypeId": "advertisement",    //固定要传类型为广告
							//"content": "",
							"expiryDate": "",    //结束时间
							"startDate": "",     //开始时间
							"extend1":"7001",     //广告页面
							"extend2":"8001",       //广告位置
					    	"content":{
						    	title:'',
								categoryId: "6001",  //广告类型
								categoryName:"图片广告",     
								pageId:'7001',        //广告页面
								pageName:'首页', 
								positionId:'8001',    //广告位置
								positionName:'顶部',    
								proportion:'',     //曝光占比
								image:'',     //图片路径
								url:'',      //链接地址
								background:''      //背景色
						    }
					    }					    					    	
					},
					methods : {
						init : function(res) {
							this.initData.title = res.title;
							this.initData.categoryTypeId = res.categoryTypeId;
							this.initData.attachUrl = res.newsAttachment && res.newsAttachment.attachUrl; 
						
						
						},
						saveNews : function(event) {
							this.initData.newsContent = event.data;
							$('#create').submit();
						}
					}
	 		    });
			


	//保存按钮传参数
	var addData={
			"categoryId": "6001",       //广告类型
		    "categoryTypeId": "advertisement",    //固定要传类型为广告
			"content": "",
			"expiryDate": "",    //结束时间
			"startDate": "",     //开始时间
			"extend1":"7001",     //广告页面
			"extend2":"8001"       //广告位置
	}

	//保存新增字段content
	var content ={
				title:'广告标题',
				categoryId: "6001",  //广告类型
				categoryName:"图片广告",     
				pageId:'7001',        //广告页面
				pageName:'首页',                                //名称是列表页使用？
				positionId:'8001',    //广告位置
				positionName:'顶部',  
				proportion:$('#proportion').val(),     //曝光占比
				image:'',     //图片路径
				url:'',      //链接地址
				background:$('#background').val()      //背景色
			}


	

	
	//请求获取初始数据 ，赋值
	if(recommendationId){
		$.aAjax({
			url:ykyUrl.product + '/v1/recommendations/' + recommendationId,
			type:'GET',
			success:function(data){	
				data.content  =	JSON.parse(data.content);
				vm.info = $.extend({},vm.info,data);    //初始化content
			},
			error:function(){
				console.log("error")
			}
		})
		
		
	}
	
	$("#cancel_btn").on("click",function(){
		history.go(-1);
	})
 });


