<!DOCTYPE html>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<c:set var="ctx" value="${pageContext.request.contextPath }" scope="request" />

<!--[if IE 8 ]>    <html class="ie8" lang="zh-CN"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9" lang="zh-CN"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="zh-CN">
<!--<![endif]-->

<head>
	<!-- jQuery 1.11.3 -->
	<c:import url ="/WEB-INF/jsp/include/main/constants.jsp"/>
	<title>企业会员</title>

	<style type="text/css">
 	.condition_inquery{background-color:#c11f2e;color:#fff;padding:10px 10px;font-size:14px;border-radius:3px;}
	.col_bt_time input{width:30%;}
	.last_log_time input{width:25%;}
  	.col_bt label,.col_bt_time label{text-align:right;}
  	.col_input_2{width:12%;}
  	.col_input_3{width:15%;}
  	.mt25{margin-top:25px;}
  	.table img{width: 32px;height: 32px;}
  	.ui-selectmenu-button.ui-button {width: 55%;margin: 0px;margin-top: -3px;height: 30px;line-height: 30px;}
  	.accountsStatus .ui-selectmenu-button.ui-button {width:46%;}
  	/*#status-button{width: 16%;}*/
  	.item_page .showpages {height: 120px;margin-bottom: 30px;}

  	.up_skin_class .y_prompt_content {width: 330px;margin-top: 25px;}
  	.operation {margin-bottom: 20px;}
  	.w340{width: 340px;height: 100px;padding: 5px 10px;resize: none;}

  	.table td a{padding-right: 0px;}
  	.lh25{line-height:25px;}
  	.titleClass span{display: inline-block;width: 100%;}
  	.ms-controller{visibility: hidden;}
  	.col_bt{height:32px;}
  	.bred{border-color:#b1191a;}
  	.col_input_1{width:55%;}
  	.add_btn {
        display: inline-block;
	    padding: 11px 10px;
	    cursor: pointer;
	    border: solid 1px #ddd;
	    border-radius: 3px;
	    font-size: 14px;
	}
	.add_btn:hover {
	    color: #b1191a;
	    border-color: #b1191a;
	}
	</style>
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">

	<jsp:directive.include file="../include/main/header.jsp" />
	<jsp:directive.include file="../include/main/menu.jsp" />

		<!-- 右边内容显示 -->
		<div class="content-wrapper ms-controller"  ms-controller="list" >
			<section class="content-header">
				<a href="${ctx}/enterprise.htm" class="header_tab pitch_tab">企业用户</a>
				<a href="${ctx}/enterprise/customers.htm" class="header_tab">个人用户</a>
			</section>
			<section class="content container-fluid">
				<div class="row mt20" ms-controller="search" id="searchFrom">
					<div class="col-xs-10"  style="border-right:1px solid #e2e2e2">
							<div class="col-xs-2 col_bt pl0 pr0 mb10">
								<label>邮箱：</label>
								<input class="col_input_1" type="text" name="mail" data-duplex="@parameter.mail" ms-attr="{value:@parameter.mail}" >
							</div>
							<div class="col-xs-2 col_bt pl0 pr0 mb10">
								<label>联系人：</label>
								<input class="col_input_1" type="text" name="contactUserName" data-duplex="@parameter.contactUserName" ms-attr="{value:@parameter.contactUserName}" >
							</div>
							<div class="col-xs-2 col_bt pl0 pr0 mb10">
								<label>手机号码：</label>
								<input maxlength="11" class="col_input_1" type="text" name="contactUserTel" data-duplex="@parameter.contactUserTel" ms-attr="{value:@parameter.contactUserTel}" >
							</div>
							<div class="col-xs-3 col_bt pl0 pr0 mb10">
								<label>公司名称：</label>
								<input class="col_input_1" type="text" name="name" data-duplex="@parameter.name" ms-attr="{value:@parameter.name}">
							</div>
							<div class="col-xs-2 col_bt pl0 pr0 mb10">
								<label>账号状态：</label>
								<select id="status" name="status" ms-duplex="@parameter.status" style="width: 12%;">
									<option value="">全部</option>
									<option value="PARTY_ENABLED">有效</option>
									<option value="PARTY_DISABLED">冻结</option>
									<option value="PARTY_NOT_VERIFIED">未激活</option>
								</select>
							</div>
							<div class="col-xs-2 col_bt pl0 pr0 mb10">
								<label>认证状态：</label>
								<select id="verifyStatus" name="verifyStatus" ms-duplex="@parameter.verifyStatus" style="width: 12%;">
									<option value="">全部</option>
									<option value="WAIT_APPROVE">待审核</option>
									<option value="PARTY_VERIFIED">通过</option>
									<option value="REJECTED">不通过</option>
									<option value="INVALID">失效</option>
									<option value="PARTY_NOT_VERIFIED">未认证</option>
									
								</select>
							</div>
							<div class="col-xs-2 col_bt pl0 pr0 mb10 accountsStatus">
								<label>主账号类型：</label>
								<select id="accountsStatus" name="accountsStatus" ms-duplex="@parameter.accountsStatus" style="width: 10%;">
									<option value="">全部</option>
									<option value="MAIN">主账号</option>
									<option value="SON">子账号</option>
									<option value="COMMON">平行账号</option>
								</select>
							</div>
							<div class="col-xs-4 col_bt_time pr0 mb10">
								<label class="">注册时间：</label>
								<span class="rel">
									<input id="registerStart" name="registerStart" class="y_main_head_input ovh" style="padding-right:46px;" type="text" data-duplex="@parameter.registerStart" ms-attr="{value:@parameter.registerStart}">
					                <span class="y_timer"><i class="cc1 icon-calendar"></i></span>
								</span>
								<span>至</span>
								<span class="rel">
					                <input id="registerEnd" name="registerEnd" class="y_main_head_input ml10 ovh" style="padding-right:46px;" type="text" data-duplex="@parameter.registerEnd" ms-attr="{value:@parameter.registerEnd}">
					                  <span class="y_timer"><i class="cc2 icon-calendar"></i></span>
								</span>
								<span class="content_top_close" onclick="showDiv();"></span>
							</div>
							<div class="col-xs-4 col_bt_time pr0 last_log_time">
								<label class="">最后登录时间：</label>
								<span class="rel">
									<input id="lastLoginStart" name="lastLoginStart" class="y_main_head_input ovh" style="padding-right:46px;" type="text" data-duplex="@parameter.lastLoginStart" ms-attr="{value:@parameter.lastLoginStart}">
					                <span class="y_timer"><i class="cc3 icon-calendar"></i></span>
								</span>
								<span>至</span>
								<span class="rel">
					                <input id="lastLoginEnd" name="lastLoginEnd" class="y_main_head_input ml10 ovh" style="padding-right:46px;" type="text" data-duplex="@parameter.lastLoginEnd" ms-attr="{value:@parameter.lastLoginEnd}">
					                  <span class="y_timer"><i class="cc4 icon-calendar"></i></span>
								</span>
								<span class="content_top_close" onclick="showDiv();"></span>
							</div>
					</div>

					<div class="col-xs-2 mt25">
						<a href="javascript:;" class="condition_inquery" ms-click="@goSearch()">
							<span ><i class="icon-sousuo mr5"></i>查询</span>
						</a>
						<a href="${ctx}/enterprise.htm?action=entAdd" class="add_btn ml10"><em class="icon-plus b mr5"></em>新增</a>
					</div>

				</div>

				<!-- 表格 -->
				<div class="row mt20">
					<div class="col-xs-12" id="result_table">
						<table class="table mb10">
							<thead>
								<tr>

									<th width="9%">邮箱</th>
									<th width="9%">联系人</th>
									<th width="9%">手机号码</th>
									<th width="9%">公司名称</th>
									<th width="5%">账号状态</th>
									<th width="5%">认证状态</th>
									<th width="5%">账号类型</th>
									<th width="6%">注册时间</th>
									<th width="6%">最后登录时间</th>
									<th width="8%">操作</th>
								</tr>
							</thead>
							<tbody >
								<tr :if="@isfirst || !@list.list.length" >
									<td colspan="10" style="padding:20px" id="loadingData" ms-html="@isLoading">数据加载中</td>
								</tr>
								<tr :for="(index,ele) in @list.list">
									<td ms-attr="{title:ele.mail?ele.mail:''}">{{ele.mail}}</td>
									<td ms-attr="{title:ele.contactUserName?ele.contactUserName:''}">{{ele.contactUserName}}</td>
									<td ms-attr="{title:ele.contactUserTel?ele.contactUserTel:''}">{{ele.contactUserTel}}</td>
									<td ms-attr="{title:ele.name?ele.name:''}">{{ele.name}}</td>
									<td>
										<span :if="ele.status=='PARTY_ENABLED'">有效</span>
										<span :if="ele.status=='PARTY_DISABLED'">冻结</span>
										<span :if="ele.status=='PARTY_NOT_VERIFIED'">未激活</span>
									</td>
									
									<td>
										<span :if="ele.activeStatus=='WAIT_APPROVE'">待审核</span>
										<span :if="ele.activeStatus=='PARTY_VERIFIED'">通过</span>
										<span :if="ele.activeStatus=='REJECTED'">不通过</span>
										<span :if="ele.activeStatus=='INVALID'">失效</span>
										<span :if="ele.activeStatus=='PARTY_NOT_VERIFIED'">未认证</span>
									</td>
									<td>
										<span :if="ele.accountsStatus=='MAIN'">主账号</span>
										<span :if="ele.accountsStatus=='SON'">子账号</span>
										<span :if="ele.accountsStatus=='COMMON'">平行账号</span>
									</td>																																				
									<td ms-attr="{title:ele.regTime?ele.regTime:''}">{{ele.regTime}}</td>
									<td ms-attr="{title:ele.lastLoginTime?ele.lastLoginTime:''}">{{ele.lastLoginTime}}</td>
									<td>
										<a class="poi" :if="ele.status=='PARTY_ENABLED'" :click="@frozenAccount(ele.mail,ele.id,ele.status)">冻结</a>
										<a class="poi" :if="ele.status=='PARTY_DISABLED'" :click="@frozenAccount(ele.mail,ele.id,ele.status)">取消冻结</a>
										<!-- <a class="poi" :if="ele.status=='WAIT_RELATION'" :click="@frozenAccount(ele.id)">激活账号</a> -->
										<a class="poi" ms-attr="{href:'${ctx}/enterprise.htm?action=detail&id='+ele.id+'&corporationId='+ele.corporationId}" target="_blank">详情</a>
										<a class="poi" ms-attr="{href:'${ctx}/enterprise.htm?action=entEdit&id='+ele.id+'&corporationId='+ele.corporationId}" target="_blank">编辑</a>																				
									</td>
								</tr>

							</tbody>
						</table>
					</div>
					<!-- <div class="col-xs-12 ml10 mb30">
						<div class="operation"><span class="inputBtn" ms-click="@exportExcels">导出</span></div>
					</div> -->
				</div>
			</section>

			<div class="item_page pl30">
			<div class="l showpages">
	            <span class="l mr5">每页显示数量</span>
 	            <div class="show_number_extrude l">
 	            	<span class="spn">{{@list.pageSize}}</span><i class="icon-down"></i><i class="icon-upward dn"></i>
 	                <div class="show_number_cont">
 	                    <ul>
	                        <li onclick="changeSize(10);"><a href="javascript:;">10</a></li>
 	                        <li onclick="changeSize(20);"><a href="javascript:;">20</a></li>
 	                        <li onclick="changeSize(30);"><a href="javascript:;">30</a></li>
 	                        <li onclick="changeSize(40);"><a href="javascript:;">40</a></li>
	                        <li onclick="changeSize(50);"><a href="javascript:;">50</a></li>
 	                    </ul>
 	                </div>
 	        	</div>
			</div>
				<!-- 分页 -->
			<div id="pager" class="r">
				  <div id="kkpager"></div>
			</div>
			<input type="hidden" value="" id="total">
			<input type="hidden" value="" id="pageSize">
			</div>
		</div>

	<form id="exportForm" action="" method="POST" target="_blank" style="display:none;">
		<input type="hidden" name="Authorization" value="Basic <shiro:principal property="loginName" />"/>
	</form>

	<script type="text/javascript">
 		var selectCatid = "225,226";
	</script>
	<jsp:directive.include file="../include/main/footer.jsp" />

	</div>
	<script src="${ctx}/js/app/firmAccountList.js"></script>
</body>
</html>
