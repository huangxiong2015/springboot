<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yikuyi.product.activity.dao.ActivityProductDao" >
  <resultMap id="BaseResultMap" type="com.yikuyi.activity.model.ActivityProduct" >
    <id column="ACTIVITY_PRODUCT_ID" property="activityProductId" jdbcType="VARCHAR" />
    <result column="ACTIVITY_ID" property="activityId" jdbcType="VARCHAR" />
    <result column="PERIODS_ID" property="periodsId" jdbcType="VARCHAR" />
    <result column="PRODUCT_ID" property="productId" jdbcType="VARCHAR" />
    <result column="MANUFACTURER_PART_NUMBER" property="manufacturerPartNumber" jdbcType="VARCHAR" />
    <result column="MANUFACTURER" property="manufacturer" jdbcType="VARCHAR" />
    <result column="SOURCE_ID" property="sourceId" jdbcType="VARCHAR" />
    <result column="SOURCE_NAME" property="sourceName" jdbcType="VARCHAR" />
    <result column="VENDOR_ID" property="vendorId" jdbcType="VARCHAR" />
    <result column="VENDOR_NAME" property="vendorName" jdbcType="VARCHAR" />
    <result column="DISCOUNT" property="discount" jdbcType="REAL" />
    <result column="CURRENCY_UOM_ID" property="currencyUomId" jdbcType="VARCHAR" />
    <result column="QTY_BREAK_1" property="qtyBreak1" jdbcType="INTEGER" />
    <result column="PRICE_BREAK_1" property="priceBreak1" jdbcType="DOUBLE" />
    <result column="QTY_BREAK_2" property="qtyBreak2" jdbcType="INTEGER" />
    <result column="PRICE_BREAK_2" property="priceBreak2" jdbcType="DOUBLE" />
    <result column="QTY_BREAK_3" property="qtyBreak3" jdbcType="INTEGER" />
    <result column="PRICE_BREAK_3" property="priceBreak3" jdbcType="DOUBLE" />
    <result column="QTY_BREAK_4" property="qtyBreak4" jdbcType="INTEGER" />
    <result column="PRICE_BREAK_4" property="priceBreak4" jdbcType="DOUBLE" />
    <result column="QTY_BREAK_5" property="qtyBreak5" jdbcType="INTEGER" />
    <result column="PRICE_BREAK_5" property="priceBreak5" jdbcType="DOUBLE" />
    <result column="TITLE" property="title" jdbcType="VARCHAR" />
    <result column="SUB_TITLE" property="subTitle" jdbcType="VARCHAR" />
    <result column="IMAGE_1" property="image1" jdbcType="VARCHAR" />
    <result column="IMAGE_2" property="image2" jdbcType="VARCHAR" />
    <result column="IMAGE_3" property="image3" jdbcType="VARCHAR" />
    <result column="IMAGE_4" property="image4" jdbcType="VARCHAR" />
    <result column="IMAGE_5" property="image5" jdbcType="VARCHAR" />
     <result column="DESCRIPTION" property="description" />
    <result column="TOTAL_QTY" property="totalQty" jdbcType="BIGINT" />
    <result column="QTY" property="qty" jdbcType="BIGINT" />
    <result column="CATEGORY_3_NAME" property="category3Name" />
    <result column="CATEGORY_3_ID" property="category3Id" />
    <result column="PROCESS_ID" property="processId" />
  </resultMap>
  
   <resultMap id="ActivityProductVoBaseResultMap" type="com.yikuyi.activity.vo.ActivityProductVo" >
    <id column="ACTIVITY_PRODUCT_ID" property="activityProductId" jdbcType="VARCHAR" />
    <result column="ACTIVITY_ID" property="activityId" jdbcType="VARCHAR" />
    <result column="PERIODS_ID" property="periodsId" jdbcType="VARCHAR" />
    <result column="PRODUCT_ID" property="productId" jdbcType="VARCHAR" />
    <result column="MANUFACTURER_PART_NUMBER" property="manufacturerPartNumber" jdbcType="VARCHAR" />
    <result column="MANUFACTURER" property="manufacturer" jdbcType="VARCHAR" />
    <result column="SOURCE_ID" property="sourceId" jdbcType="VARCHAR" />
    <result column="SOURCE_NAME" property="sourceName" jdbcType="VARCHAR" />
    <result column="VENDOR_ID" property="vendorId" jdbcType="VARCHAR" />
    <result column="VENDOR_NAME" property="vendorName" jdbcType="VARCHAR" />
    <result column="DISCOUNT" property="discount" jdbcType="REAL" />
    <result column="CURRENCY_UOM_ID" property="currencyUomId" jdbcType="VARCHAR" />
    <result column="QTY_BREAK_1" property="qtyBreak1" jdbcType="INTEGER" />
    <result column="PRICE_BREAK_1" property="priceBreak1" jdbcType="DOUBLE" />
    <result column="QTY_BREAK_2" property="qtyBreak2" jdbcType="INTEGER" />
    <result column="PRICE_BREAK_2" property="priceBreak2" jdbcType="DOUBLE" />
    <result column="QTY_BREAK_3" property="qtyBreak3" jdbcType="INTEGER" />
    <result column="PRICE_BREAK_3" property="priceBreak3" jdbcType="DOUBLE" />
    <result column="QTY_BREAK_4" property="qtyBreak4" jdbcType="INTEGER" />
    <result column="PRICE_BREAK_4" property="priceBreak4" jdbcType="DOUBLE" />
    <result column="QTY_BREAK_5" property="qtyBreak5" jdbcType="INTEGER" />
    <result column="PRICE_BREAK_5" property="priceBreak5" jdbcType="DOUBLE" />
    <result column="TITLE" property="title" jdbcType="VARCHAR" />
    <result column="SUB_TITLE" property="subTitle" jdbcType="VARCHAR" />
    <result column="IMAGE_1" property="image1" jdbcType="VARCHAR" />
    <result column="IMAGE_2" property="image2" jdbcType="VARCHAR" />
    <result column="IMAGE_3" property="image3" jdbcType="VARCHAR" />
    <result column="IMAGE_4" property="image4" jdbcType="VARCHAR" />
    <result column="IMAGE_5" property="image5" jdbcType="VARCHAR" />
    <result column="CATEGORY_3_NAME" property="category3Name" />
    <result column="CATEGORY_3_ID" property="category3Id" />
    <result column="PROCESS_ID" property="processId" />
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
    <result column="TOTAL_QTY" property="totalQty" jdbcType="BIGINT" />
    <result column="QTY" property="qty" jdbcType="BIGINT" />
    <result column="IS_SYSTEM_QTY" property="isSystemQty" jdbcType="VARCHAR" />
  </resultMap>
  <insert id="save" parameterType="com.yikuyi.activity.model.ActivityProduct" >
    insert into ACTIVITY_PRODUCT
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="activityProductId != null" >
        ACTIVITY_PRODUCT_ID,
      </if>
      <if test="activityId != null" >
        ACTIVITY_ID,
      </if>
      <if test="periodsId != null" >
        PERIODS_ID,
      </if>
      <if test="productId != null" >
        PRODUCT_ID,
      </if>
      <if test="manufacturerPartNumber != null" >
        MANUFACTURER_PART_NUMBER,
      </if>
      <if test="manufacturer != null" >
        MANUFACTURER,
      </if>
      <if test="sourceId != null" >
        SOURCE_ID,
      </if>
      <if test="sourceName != null" >
        SOURCE_NAME,
      </if>
      <if test="vendorId != null" >
        VENDOR_ID,
      </if>
      <if test="vendorName != null" >
        VENDOR_NAME,
      </if>
      <if test="discount != null" >
        DISCOUNT,
      </if>
      <if test="currencyUomId != null" >
        CURRENCY_UOM_ID,
      </if>
      <if test="qtyBreak1 != null" >
        QTY_BREAK_1,
      </if>
      <if test="priceBreak1 != null" >
        PRICE_BREAK_1,
      </if>
      <if test="qtyBreak2 != null" >
        QTY_BREAK_2,
      </if>
      <if test="priceBreak2 != null" >
        PRICE_BREAK_2,
      </if>
      <if test="qtyBreak3 != null" >
        QTY_BREAK_3,
      </if>
      <if test="priceBreak3 != null" >
        PRICE_BREAK_3,
      </if>
      <if test="qtyBreak4 != null" >
        QTY_BREAK_4,
      </if>
      <if test="priceBreak4 != null" >
        PRICE_BREAK_4,
      </if>
      <if test="qtyBreak5 != null" >
        QTY_BREAK_5,
      </if>
      <if test="priceBreak5 != null" >
        PRICE_BREAK_5,
      </if>
      <if test="title != null" >
        TITLE,
      </if>
      <if test="subTitle != null" >
        SUB_TITLE,
      </if>
      <if test="image1 != null" >
        IMAGE_1,
      </if>
      <if test="image2 != null" >
        IMAGE_2,
      </if>
      <if test="image3 != null" >
        IMAGE_3,
      </if>
      <if test="image4 != null" >
        IMAGE_4,
      </if>
      <if test="image5 != null" >
        IMAGE_5,
      </if>
      <if test="totalQty != null" >
        TOTAL_QTY,
      </if>
      <if test="qty != null" >
        QTY,
      </if>
      <if test="description != null" >
        DESCRIPTION,
      </if>
      <if test="category3Name != null" >
        CATEGORY_3_NAME,
      </if>
      <if test="category3Id != null" >
        CATEGORY_3_ID,
      </if>
      <if test="processId != null" >
        PROCESS_ID,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="activityProductId != null" >
        #{activityProductId,jdbcType=VARCHAR},
      </if>
      <if test="activityId != null" >
        #{activityId,jdbcType=VARCHAR},
      </if>
      <if test="periodsId != null" >
        #{periodsId,jdbcType=VARCHAR},
      </if>
      <if test="productId != null" >
        #{productId,jdbcType=VARCHAR},
      </if>
      <if test="manufacturerPartNumber != null" >
        #{manufacturerPartNumber,jdbcType=VARCHAR},
      </if>
      <if test="manufacturer != null" >
        #{manufacturer,jdbcType=VARCHAR},
      </if>
      <if test="sourceId != null" >
        #{sourceId,jdbcType=VARCHAR},
      </if>
      <if test="sourceName != null" >
        #{sourceName,jdbcType=VARCHAR},
      </if>
      <if test="vendorId != null" >
        #{vendorId,jdbcType=VARCHAR},
      </if>
      <if test="vendorName != null" >
        #{vendorName,jdbcType=VARCHAR},
      </if>
      <if test="discount != null" >
        #{discount,jdbcType=REAL},
      </if>
      <if test="currencyUomId != null" >
        #{currencyUomId,jdbcType=VARCHAR},
      </if>
      <if test="qtyBreak1 != null" >
        #{qtyBreak1,jdbcType=INTEGER},
      </if>
      <if test="priceBreak1 != null" >
        #{priceBreak1,jdbcType=DOUBLE},
      </if>
      <if test="qtyBreak2 != null" >
        #{qtyBreak2,jdbcType=INTEGER},
      </if>
      <if test="priceBreak2 != null" >
        #{priceBreak2,jdbcType=DOUBLE},
      </if>
      <if test="qtyBreak3 != null" >
        #{qtyBreak3,jdbcType=INTEGER},
      </if>
      <if test="priceBreak3 != null" >
        #{priceBreak3,jdbcType=DOUBLE},
      </if>
      <if test="qtyBreak4 != null" >
        #{qtyBreak4,jdbcType=INTEGER},
      </if>
      <if test="priceBreak4 != null" >
        #{priceBreak4,jdbcType=DOUBLE},
      </if>
      <if test="qtyBreak5 != null" >
        #{qtyBreak5,jdbcType=INTEGER},
      </if>
      <if test="priceBreak5 != null" >
        #{priceBreak5,jdbcType=DOUBLE},
      </if>
      <if test="title != null" >
        #{title,jdbcType=VARCHAR},
      </if>
      <if test="subTitle != null" >
        #{subTitle,jdbcType=VARCHAR},
      </if>
      <if test="image1 != null" >
        #{image1,jdbcType=VARCHAR},
      </if>
      <if test="image2 != null" >
        #{image2,jdbcType=VARCHAR},
      </if>
      <if test="image3 != null" >
        #{image3,jdbcType=VARCHAR},
      </if>
      <if test="image4 != null" >
        #{image4,jdbcType=VARCHAR},
      </if>
      <if test="image5 != null" >
        #{image5,jdbcType=VARCHAR},
      </if>
      <if test="totalQty != null" >
        #{totalQty,jdbcType=BIGINT},
      </if>
      <if test="qty != null" >
        #{qty,jdbcType=BIGINT},
      </if>
      <if test="description != null" >
        #{description},
      </if>
      <if test="category3Name != null" >
        #{category3Name},
      </if>
      <if test="category3Id != null" >
        #{category3Id},
      </if>
      <if test="processId != null" >
        #{processId},
      </if>
    </trim>
  </insert>
	  <delete id="deleteByActivityId">
	  	DELETE FROM ACTIVITY_PRODUCT WHERE ACTIVITY_ID = #{id}
	  </delete>
  <update id="update" parameterType="com.yikuyi.activity.model.ActivityProduct" >
    update ACTIVITY_PRODUCT
    <set >
      <if test="activityId != null" >
        ACTIVITY_ID = #{activityId,jdbcType=VARCHAR},
      </if>
      <if test="periodsId != null" >
        PERIODS_ID = #{periodsId,jdbcType=VARCHAR},
      </if>
      <if test="productId != null" >
        PRODUCT_ID = #{productId,jdbcType=VARCHAR},
      </if>
      <if test="manufacturerPartNumber != null" >
        MANUFACTURER_PART_NUMBER = #{manufacturerPartNumber,jdbcType=VARCHAR},
      </if>
      <if test="manufacturer != null" >
        MANUFACTURER = #{manufacturer,jdbcType=VARCHAR},
      </if>
      <if test="sourceId != null" >
        SOURCE_ID = #{sourceId,jdbcType=VARCHAR},
      </if>
      <if test="sourceName != null" >
        SOURCE_NAME = #{sourceName,jdbcType=VARCHAR},
      </if>
      <if test="vendorId != null" >
        VENDOR_ID = #{vendorId,jdbcType=VARCHAR},
      </if>
      <if test="vendorName != null" >
        VENDOR_NAME = #{vendorName,jdbcType=VARCHAR},
      </if>
      <if test="discount != null" >
        DISCOUNT = #{discount,jdbcType=REAL},
      </if>
      <if test="currencyUomId != null" >
        CURRENCY_UOM_ID = #{currencyUomId,jdbcType=VARCHAR},
      </if>
      <if test="qtyBreak1 != null" >
        QTY_BREAK_1 = #{qtyBreak1,jdbcType=INTEGER},
      </if>
      <if test="priceBreak1 != null" >
        PRICE_BREAK_1 = #{priceBreak1,jdbcType=DOUBLE},
      </if>
      <if test="qtyBreak2 != null" >
        QTY_BREAK_2 = #{qtyBreak2,jdbcType=INTEGER},
      </if>
      <if test="priceBreak2 != null" >
        PRICE_BREAK_2 = #{priceBreak2,jdbcType=DOUBLE},
      </if>
      <if test="qtyBreak3 != null" >
        QTY_BREAK_3 = #{qtyBreak3,jdbcType=INTEGER},
      </if>
      <if test="priceBreak3 != null" >
        PRICE_BREAK_3 = #{priceBreak3,jdbcType=DOUBLE},
      </if>
      <if test="qtyBreak4 != null" >
        QTY_BREAK_4 = #{qtyBreak4,jdbcType=INTEGER},
      </if>
      <if test="priceBreak4 != null" >
        PRICE_BREAK_4 = #{priceBreak4,jdbcType=DOUBLE},
      </if>
      <if test="qtyBreak5 != null" >
        QTY_BREAK_5 = #{qtyBreak5,jdbcType=INTEGER},
      </if>
      <if test="priceBreak5 != null" >
        PRICE_BREAK_5 = #{priceBreak5,jdbcType=DOUBLE},
      </if>
      <if test="title != null" >
        TITLE = #{title,jdbcType=VARCHAR},
      </if>
      <if test="subTitle != null" >
        SUB_TITLE = #{subTitle,jdbcType=VARCHAR},
      </if>
      <if test="image1 != null" >
        IMAGE_1 = #{image1,jdbcType=VARCHAR},
      </if>
      <if test="image2 != null" >
        IMAGE_2 = #{image2,jdbcType=VARCHAR},
      </if>
      <if test="image3 != null" >
        IMAGE_3 = #{image3,jdbcType=VARCHAR},
      </if>
      <if test="image4 != null" >
        IMAGE_4 = #{image4,jdbcType=VARCHAR},
      </if>
      <if test="image5 != null" >
        IMAGE_5 = #{image5,jdbcType=VARCHAR},
      </if>
      <if test="totalQty != null" >
        TOTAL_QTY = #{totalQty,jdbcType=BIGINT},
      </if>
      <if test="qty != null" >
        QTY = #{qty,jdbcType=BIGINT},
      </if>
      <if test="category3Name != null" >
        CATEGORY_3_NAME = #{category3Name},
      </if>
      <if test="category3Id != null" >
        CATEGORY_3_ID = #{category3Id},
      </if>
      <if test="processId != null" >
        PROCESS_ID = #{processId},
      </if>
    </set>
    where ACTIVITY_PRODUCT_ID = #{activityProductId,jdbcType=VARCHAR}
  </update>
  
  <update id="updateQty" parameterType="com.yikuyi.activity.model.ActivityProduct" >
    update ACTIVITY_PRODUCT SET QTY = #{qty,jdbcType=BIGINT}
    WHERE ACTIVITY_PRODUCT_ID = #{activityProductId,jdbcType=VARCHAR} AND #{qty} <![CDATA[ <= ]]> TOTAL_QTY
  </update>
  
  <!-- 按活动id查询活动商品 -->
  <select id="findActivityProduct" parameterType="java.lang.String" resultMap="BaseResultMap">
  		select ACTIVITY_PRODUCT_ID,ACTIVITY_ID,PERIODS_ID,PRODUCT_ID,MANUFACTURER_PART_NUMBER,MANUFACTURER,SOURCE_ID,
  		SOURCE_NAME,VENDOR_ID,VENDOR_NAME,DISCOUNT,CURRENCY_UOM_ID,QTY_BREAK_1,PRICE_BREAK_1,QTY_BREAK_2,PRICE_BREAK_2,
  		QTY_BREAK_3,PRICE_BREAK_3,QTY_BREAK_4,PRICE_BREAK_4,QTY_BREAK_5,PRICE_BREAK_5,TITLE,SUB_TITLE,IMAGE_1,IMAGE_2,
  		IMAGE_3,IMAGE_4,IMAGE_5,DESCRIPTION,TOTAL_QTY,QTY,CREATOR,CREATED_DATE,LAST_UPDATE_USER,LAST_UPDATE_DATE
  		from ACTIVITY_PRODUCT where ACTIVITY_ID = #{activityId}
  </select>
  
  <select id="findActivityProductByCondition" resultMap="ActivityProductVoBaseResultMap">
	SELECT
		ap.`ACTIVITY_PRODUCT_ID`,
		ap.`ACTIVITY_ID`,
		ap.`PERIODS_ID`,
		ap.`PRODUCT_ID`,
		ap.`MANUFACTURER_PART_NUMBER`,
		ap.`MANUFACTURER`,
		ap.`SOURCE_ID`,
		ap.`SOURCE_NAME`,
		ap.`VENDOR_ID`,
		ap.`VENDOR_NAME`,
		ap.`DISCOUNT`,
		ap.`CURRENCY_UOM_ID`,
		ap.`QTY_BREAK_1`,
		ap.`PRICE_BREAK_1`,
		ap.`QTY_BREAK_2`,
		ap.`PRICE_BREAK_2`,
		ap.`QTY_BREAK_3`,
		ap.`PRICE_BREAK_3`,
		ap.`QTY_BREAK_4`,
		ap.`PRICE_BREAK_4`,
		ap.`QTY_BREAK_5`,
		ap.`PRICE_BREAK_5`,
		ap.`TITLE`,
		ap.`SUB_TITLE`,
		ap.`IMAGE_1`,
		ap.`IMAGE_2`,
		ap.`IMAGE_3`,
		ap.`IMAGE_4`,
		ap.`IMAGE_5`,
		ap.`CATEGORY_3_ID`,
		ap.`CATEGORY_3_NAME`,
		ap.`DESCRIPTION`,
		ap.`TOTAL_QTY`,
		ap.`QTY`,
		ap.`CREATOR`,
		ap.`CREATED_DATE`,
		ap.`LAST_UPDATE_USER`,
		ap.`LAST_UPDATE_DATE`,
		a.`IS_SYSTEM_QTY`
	FROM
	`ACTIVITY_PRODUCT` ap left join ACTIVITY a on a.`ACTIVITY_ID` = ap.`ACTIVITY_ID`
	<where>
		<if test="activityId != null">
			and ap.ACTIVITY_ID = #{activityId}
		</if>
		<if test="periodsIds != null and periodsIds.length>0">
			and ap.PERIODS_ID in
			<foreach collection="periodsIds" item="periodsId" index="index"
				open="(" close=")" separator=",">
				#{periodsId}
			</foreach>
		</if>
	</where>
	order by ap.CREATED_DATE desc
  </select>
  
  <!-- 将昨天未到期的活动商品库存恢复到最大值 -->
  <update id="updateQtyToTotal" parameterType="com.yikuyi.activity.model.ActivitySaleHistory">
	UPDATE ACTIVITY_PRODUCT,ACTIVITY,
		(
			SELECT
				DATE_ADD(
					CURRENT_DATE (),
					INTERVAL - 1 DAY
				) date
		) yestorday set ACTIVITY_PRODUCT.QTY = ACTIVITY_PRODUCT.TOTAL_QTY
	WHERE ACTIVITY_PRODUCT.ACTIVITY_ID=ACTIVITY.ACTIVITY_ID and ACTIVITY.START_DATE&lt;=yestorday.date and ACTIVITY.END_DATE &gt;= yestorday.date
	AND ACTIVITY.`TYPE` != '10000'
	<!-- 增加促销商品库存数量不还原操作 -->
  </update>

  
  <update id="updateQtyToTotalById" parameterType="java.lang.String">
	UPDATE ACTIVITY_PRODUCT SET QTY = TOTAL_QTY WHERE ACTIVITY_ID = #{activityId}
	<!-- 增加促销商品库存数量不还原操作 -->
  </update>
  
  
  <select id="findActivityProductByArray" resultMap="ActivityProductVoBaseResultMap">
  	 SELECT 
	  `ACTIVITY_PRODUCT_ID`,
	  `ACTIVITY_ID`,
	  `PERIODS_ID`,
	  `PRODUCT_ID`,
	  `MANUFACTURER_PART_NUMBER`,
	  `MANUFACTURER`,
	  `SOURCE_ID`,
	  `SOURCE_NAME`,
	  `VENDOR_ID`,
	  `VENDOR_NAME`,
	  `DISCOUNT`,
	  `CURRENCY_UOM_ID`,
	  `QTY_BREAK_1`,
	  `PRICE_BREAK_1`,
	  `QTY_BREAK_2`,
	  `PRICE_BREAK_2`,
	  `QTY_BREAK_3`,
	  `PRICE_BREAK_3`,
	  `QTY_BREAK_4`,
	  `PRICE_BREAK_4`,
	  `QTY_BREAK_5`,
	  `PRICE_BREAK_5`,
	  `TITLE`,
	  `SUB_TITLE`,
	  `IMAGE_1`,
	  `IMAGE_2`,
	  `IMAGE_3`,
	  `IMAGE_4`,
	  `IMAGE_5`,
	  `CATEGORY_3_ID`,
	  `CATEGORY_3_NAME`,
	  `DESCRIPTION`,
	  `TOTAL_QTY`,
	  `QTY`,
	  `CREATOR`,
	  `CREATED_DATE`,
	  `LAST_UPDATE_USER`,
	  `LAST_UPDATE_DATE` 
	FROM
	  `ACTIVITY_PRODUCT` 
	  <where>
	  <if test = "activityId != null">
	  	and ACTIVITY_ID = #{activityId}
	  </if>
	  <if test = "periodsIds != null and periodsIds.length>0">
	  	and PERIODS_ID in
	  	  <foreach collection="periodsIds" item="periodsId" index="index"  
            open="(" close=")" separator=",">  
            #{periodsId}  
        </foreach>  
	  </if>
	  </where>
  </select>
</mapper>