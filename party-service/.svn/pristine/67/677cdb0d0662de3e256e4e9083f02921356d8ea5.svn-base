package com.yikuyi.party.acl;

import java.util.List;
import java.util.Set;

import org.junit.Assert;
import org.junit.Test;

import com.yikuyi.party.config.BaseTest;
import com.yikuyi.party.contact.vo.MsgResultVo;
import com.yikuyi.party.model.Party;
import com.yikuyi.party.vo.RoleVo;

public class ACLResourceTest extends BaseTest {

	@Test
	public void findAll() {
		Set<String> list = super.partyClient.aclResource().getUserRoles("9999999901","YWRtaW46OTk5OTk5OTkwMQ==");
		Assert.assertTrue(list.size() > 0);
	}
	/**
	 * 根据角色获取用户
	 * @param role
	 * @param authToken
	 * @return
	 * @since 2017年6月29日
	 * @author zr.aoxianbing@yikuyi.com
	 */
	@Test
	public void getUserByRole() {
		List<Party> list = super.partyClient.aclResource().getUserByRole("864327651584638976","YWRtaW46OTk5OTk5OTkwMQ==");
		Assert.assertTrue(list.size() > 0);
	}
	/**
	 * 新增角色和菜单的权限关系
	 * @param vo
	 * @return
	 * @since 2017年6月16日
	 * @author jik.shu@yikuyi.com
	 */
	@Test
	public void addRoelMenuRelaction() {
		RoleVo vo = new RoleVo();
		vo.setMenuType("CUSTOMER");
		vo.setMenuPower("MENU:VIEW:25896");
		vo.setMenuId("11001");
		MsgResultVo msgResultVo = super.partyClient.aclResource().addRoelMenuRelaction(vo,"YWRtaW46OTk5OTk5OTkwMQ==");
		Assert.assertEquals("FAILED", msgResultVo.getCode());
	}
}