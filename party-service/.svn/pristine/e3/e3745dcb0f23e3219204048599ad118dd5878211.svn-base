<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yikuyi.party.facility.dao.FacilityDao">
	<resultMap id="BaseResultMap" type="com.yikuyi.party.facility.model.Facility">
		<id column="FACILITY_ID" property="id"/>
		<result column="OWNER_PARTY_ID" property="ownerPartyId"/>
		<result column="FACILITY_NAME" property="facilityName"/>
		<result column="DEFAULT_DAYS_TO_SHIP" property="defaultDaysToShip"/>
		<result column="FROM_DATE" property="fromDate"/>
		<result column="THRU_DATE" property="thruDate"/>
		<result property="creator" column="CREATOR"/>
        <result property="createdDate" column="CREATED_DATE"/>
        <result property="lastUpdateUser" column="LAST_UPDATE_USER"/>
        <result property="lastUpdateDate" column="LAST_UPDATE_DATE"/>
	</resultMap>


	<select id="getFacilityList" resultMap="BaseResultMap">
		SELECT
		FACILITY_ID,
		OWNER_PARTY_ID,
		FACILITY_NAME,
		DEFAULT_DAYS_TO_SHIP,
		FROM_DATE,
		THRU_DATE
		FROM
		`FACILITY` a
		WHERE a.`THRU_DATE` IS NULL
		 AND a.`OWNER_PARTY_ID` = #{id}
	</select>
	<select id="getFacility" resultMap="BaseResultMap">
		SELECT
		FACILITY_ID,
		OWNER_PARTY_ID,
		FACILITY_NAME,
		DEFAULT_DAYS_TO_SHIP,
		FROM_DATE,
		THRU_DATE
		FROM
		`FACILITY` a
		WHERE a.`THRU_DATE` IS NULL
		 <if test="ids != null and ids.size() !=0">
			 AND a.`FACILITY_ID` in 
	        <foreach collection="ids" item="id" index="index"
	            open="(" close=")" separator=",">
	            #{id}
	        </foreach>
        </if>
      
	</select>
	
	<!-- 多条件删除 -->
	 <delete id="delete">
            DELETE FROM FACILITY 
            <where>
           <if test="id != null">
                AND FACILITY_ID = #{id}
            </if>
           <if test="ownerPartyId != null">
                AND OWNER_PARTY_ID = #{ownerPartyId}
            </if>
        </where>
    </delete>
    
    
     <!-- 新增-->
    <insert id="add" >
	    INSERT INTO FACILITY
	    <trim prefix="(" suffix=")" suffixOverrides="," >
	    	<if test="id != null">
	        FACILITY_ID,
	        </if>
	    	<if test="ownerPartyId != null">
	        OWNER_PARTY_ID,
	        </if>
	    	<if test="facilityName != null">
	        FACILITY_NAME,
	        </if>
	    	<if test="defaultDaysToShip != null">
	        DEFAULT_DAYS_TO_SHIP,
	        </if>
	    	<if test="fromDate != null">
	        FROM_DATE,
	        </if>
	        <if test="thruDate != null">
	        THRU_DATE,
	        </if>
	    	<if test="creator != null">
	        CREATOR,
	        </if>
	    	<if test="createdDate != null">
	        CREATED_DATE,
	        </if>
	    	<if test="lastUpdateUser != null">
	        LAST_UPDATE_USER,
	        </if>
	    	<if test="lastUpdateDate != null">
	        LAST_UPDATE_DATE
	        </if>
	    </trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
	    	<if test="id != null">
	        #{id},
	        </if>
	    	<if test="ownerPartyId != null">
	        #{ownerPartyId},
	        </if>
	    	<if test="facilityName != null">
	        #{facilityName},
	        </if>
	    	<if test="defaultDaysToShip != null">
	        #{defaultDaysToShip},
	        </if>
	    	<if test="fromDate != null">
	        #{fromDate},
	        </if>
	        <if test="thruDate != null">
	        #{thruDate},
	        </if>
	    	<if test="creator != null">
	        #{creator},
	        </if>
	    	<if test="createdDate != null">
	        #{createdDate},
	        </if>
	    	<if test="lastUpdateUser != null">
	        #{lastUpdateUser},
	        </if>
	    	<if test="lastUpdateDate != null">
	        #{lastUpdateDate}
	        </if>
	    </trim>
    </insert>
    

 <!-- 根据ID 修改仓库信息 -->
    <update id="update">
	    UPDATE
	        FACILITY
	    <set>
	        <if test="ownerPartyId != null">
	        	<![CDATA[ OWNER_PARTY_ID = #{ownerPartyId} ]]>,
	        </if>
	        <if test="facilityName != null">
	        	<![CDATA[ FACILITY_NAME = #{facilityName} ]]>,
	        </if>
	        <if test="defaultDaysToShip != null">
	        	<![CDATA[ DEFAULT_DAYS_TO_SHIP = #{defaultDaysToShip} ]]>,
	        </if>
	        <if test="fromDate != null">
	        	<![CDATA[ FROM_DATE = #{fromDate} ]]>,
	        </if>
	        <if test="thruDate != null">
	        	<![CDATA[ THRU_DATE = #{thruDate} ]]>,
	        </if>
	         <if test="creator != null">
	        	<![CDATA[ CREATOR = #{creator} ]]>,
	        </if>
	         <if test="createdDate != null">
	        	<![CDATA[ CREATED_DATE = #{createdDate} ]]>,
	        </if>
	         <if test="lastUpdateUser != null">
	        	<![CDATA[ LAST_UPDATE_USER = #{lastUpdateUser} ]]>,
	        </if>
	        <if test="lastUpdateDate != null">
	        	<![CDATA[ LAST_UPDATE_DATE = #{lastUpdateDate} ]]>,
	        </if>
	    </set>
	    <where>
           <if test="id != null">
                AND FACILITY_ID = #{id}
            </if>
           <if test="ownerPartyId != null">
                AND OWNER_PARTY_ID = #{ownerPartyId}
            </if>
        </where>
    </update>
    


</mapper>