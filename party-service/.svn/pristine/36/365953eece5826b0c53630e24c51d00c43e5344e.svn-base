<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yikuyi.party.party.dao.PartyAttributeDao">
	<resultMap id="BaseResultMap" type="com.yikuyi.party.model.PartyAttribute">
		<id column="ATTR_NAME" property="key" jdbcType="VARCHAR" />
		<result column="ATTR_VALUE" property="value" jdbcType="VARCHAR" />
		<result column="ATTR_ID" property="attrId" jdbcType="VARCHAR" />
		<result column="PARENT_ATTR_ID" property="parentAttrId"
			jdbcType="VARCHAR" />
		<result column="CREATOR" property="creator" jdbcType="VARCHAR" />
		<result column="CREATED_DATE" property="createdDate" jdbcType="TIMESTAMP" />
		<result column="LAST_UPDATE_USER" property="lastUpdateUser"
			jdbcType="VARCHAR" />
		<result column="LAST_UPDATE_DATE" property="lastUpdateDate"
			jdbcType="TIMESTAMP" />
	</resultMap>

	<!-- 所属行业 -->
	<insert id="insertIndustryCategory" parameterType="com.yikuyi.party.model.Party">
		insert into PARTY_ATTRIBUTE
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				PARTY_ID,
			</if>
			<if test="partyAttributes.industryCategory.key != null">
				ATTR_NAME,
			</if>
			<if test="partyAttributes.industryCategory.value != null">
				ATTR_VALUE,
			</if>
			<if test="partyAttributes.industryCategory.creator != null">
				CREATOR,
			</if>
			<if test="partyAttributes.industryCategory.createdDate != null">
				CREATED_DATE,
			</if>
			<if test="partyAttributes.industryCategory.lastUpdateUser != null">
				LAST_UPDATE_USER,
			</if>
			<if test="partyAttributes.industryCategory.lastUpdateDate != null">
				LAST_UPDATE_DATE,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.industryCategory.key != null">
				#{partyAttributes.industryCategory.key,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.industryCategory.value != null">
				#{partyAttributes.industryCategory.value,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.industryCategory.creator != null">
				#{partyAttributes.industryCategory.creator,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.industryCategory.createdDate != null">
				#{partyAttributes.industryCategory.createdDate,jdbcType=TIMESTAMP},
			</if>
			<if test="partyAttributes.industryCategory.lastUpdateUser != null">
				#{partyAttributes.industryCategory.lastUpdateUser,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.industryCategory.lastUpdateDate != null">
				#{partyAttributes.industryCategory.lastUpdateDate,jdbcType=TIMESTAMP},
			</if>

		</trim>
	</insert>


	<!-- 所属行业其它属性拓展属性 -->
	<insert id="insertOtherAttrs" parameterType="com.yikuyi.party.model.Party">
		insert into PARTY_ATTRIBUTE
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				PARTY_ID,
			</if>
			<if test="partyAttributes.otherAttrs.key != null">
				ATTR_NAME,
			</if>
			<if test="partyAttributes.otherAttrs.value != null">
				ATTR_VALUE,
			</if>
			<if test="partyAttributes.otherAttrs.creator != null">
				CREATOR,
			</if>
			<if test="partyAttributes.otherAttrs.createdDate != null">
				CREATED_DATE,
			</if>
			<if test="partyAttributes.otherAttrs.lastUpdateUser != null">
				LAST_UPDATE_USER,
			</if>
			<if test="partyAttributes.otherAttrs.lastUpdateDate != null">
				LAST_UPDATE_DATE,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.otherAttrs.key != null">
				#{partyAttributes.otherAttrs.key,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.otherAttrs.value != null">
				#{partyAttributes.otherAttrs.value,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.otherAttrs.creator != null">
				#{partyAttributes.otherAttrs.creator,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.otherAttrs.createdDate != null">
				#{partyAttributes.otherAttrs.createdDate,jdbcType=TIMESTAMP},
			</if>
			<if test="partyAttributes.otherAttrs.lastUpdateUser != null">
				#{partyAttributes.otherAttrs.lastUpdateUser,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.otherAttrs.lastUpdateDate != null">
				#{partyAttributes.otherAttrs.lastUpdateDate,jdbcType=TIMESTAMP},
			</if>

		</trim>
	</insert>

	<!-- 插入资质信息属性qqq -->
	<insert id="insertCerAttrs" parameterType="com.yikuyi.party.model.Party">
		insert into PARTY_ATTRIBUTE
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				PARTY_ID,
			</if>
			<if test="partyAttributes.certificateAttrs.attrId != null">
				ATTR_ID,
			</if>
			<if test="partyAttributes.certificateAttrs.key != null">
				ATTR_NAME,
			</if>
			<if test="partyAttributes.certificateAttrs.value != null">
				ATTR_VALUE,
			</if>
			<if test="partyAttributes.certificateAttrs.creator != null">
				CREATOR,
			</if>
			<if test="partyAttributes.certificateAttrs.createdDate != null">
				CREATED_DATE,
			</if>
			<if test="partyAttributes.certificateAttrs.lastUpdateUser != null">
				LAST_UPDATE_USER,
			</if>
			<if test="partyAttributes.certificateAttrs.lastUpdateDate != null">
				LAST_UPDATE_DATE,
			</if>
			<if test="partyAttributes.certificateAttrs.parentAttrId != null">
				PARENT_ATTR_ID,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.certificateAttrs.attrId != null">
				#{partyAttributes.certificateAttrs.attrId,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.certificateAttrs.key != null">
				#{partyAttributes.certificateAttrs.key,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.certificateAttrs.value != null">
				#{partyAttributes.certificateAttrs.value,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.certificateAttrs.creator != null">
				#{partyAttributes.certificateAttrs.creator,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.certificateAttrs.createdDate != null">
				#{partyAttributes.certificateAttrs.createdDate,jdbcType=TIMESTAMP},
			</if>
			<if test="partyAttributes.certificateAttrs.lastUpdateUser != null">
				#{partyAttributes.certificateAttrs.lastUpdateUser,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.certificateAttrs.lastUpdateDate != null">
				#{partyAttributes.certificateAttrs.lastUpdateDate,jdbcType=TIMESTAMP},
			</if>
			<if test="partyAttributes.certificateAttrs.parentAttrId != null">
				#{partyAttributes.certificateAttrs.parentAttrId,jdbcType=TIMESTAMP},
			</if>
		</trim>
	</insert>

	<!--授权委托书 -->
	<insert id="insertLoa" parameterType="com.yikuyi.party.model.Party">
		insert into PARTY_ATTRIBUTE
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				PARTY_ID,
			</if>
			<if test="partyAttributes.loa.key != null">
				ATTR_NAME,
			</if>
			<if test="partyAttributes.loa.value != null">
				ATTR_VALUE,
			</if>
			<if test="partyAttributes.loa.creator != null">
				CREATOR,
			</if>
			<if test="partyAttributes.loa.createdDate != null">
				CREATED_DATE,
			</if>
			<if test="partyAttributes.loa.lastUpdateUser != null">
				LAST_UPDATE_USER,
			</if>
			<if test="partyAttributes.loa.lastUpdateDate != null">
				LAST_UPDATE_DATE,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.loa.key != null">
				#{partyAttributes.loa.key,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.loa.value != null">
				#{partyAttributes.loa.value,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.loa.creator != null">
				#{partyAttributes.loa.creator,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.loa.createdDate != null">
				#{partyAttributes.loa.createdDate,jdbcType=TIMESTAMP},
			</if>
			<if test="partyAttributes.loa.lastUpdateUser != null">
				#{partyAttributes.loa.lastUpdateUser,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.loa.lastUpdateDate != null">
				#{partyAttributes.loa.lastUpdateDate,jdbcType=TIMESTAMP},
			</if>
		</trim>
	</insert>

	<!-- 公司类型 -->
	<insert id="insertCorporationCategory" parameterType="com.yikuyi.party.model.Party">
		insert into PARTY_ATTRIBUTE
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				PARTY_ID,
			</if>
			<if test="partyAttributes.corporationCategory.key != null">
				ATTR_NAME,
			</if>
			<if test="partyAttributes.corporationCategory.value != null">
				ATTR_VALUE,
			</if>
			<if test="partyAttributes.corporationCategory.creator != null">
				CREATOR,
			</if>
			<if test="partyAttributes.corporationCategory.createdDate != null">
				CREATED_DATE,
			</if>
			<if test="partyAttributes.corporationCategory.lastUpdateUser != null">
				LAST_UPDATE_USER,
			</if>
			<if test="partyAttributes.corporationCategory.lastUpdateDate != null">
				LAST_UPDATE_DATE,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.corporationCategory.key != null">
				#{partyAttributes.corporationCategory.key,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.corporationCategory.value != null">
				#{partyAttributes.corporationCategory.value,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.corporationCategory.creator != null">
				#{partyAttributes.corporationCategory.creator,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.corporationCategory.createdDate != null">
				#{partyAttributes.corporationCategory.createdDate,jdbcType=TIMESTAMP},
			</if>
			<if test="partyAttributes.corporationCategory.lastUpdateUser != null">
				#{partyAttributes.corporationCategory.lastUpdateUser,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.corporationCategory.lastUpdateDate != null">
				#{partyAttributes.corporationCategory.lastUpdateDate,jdbcType=TIMESTAMP},
			</if>
		</trim>
	</insert>


	<!-- 是否显示名称 Y(显示),N(不显示) -->
	<insert id="insertIsShowName" parameterType="com.yikuyi.party.model.Party">
		insert into PARTY_ATTRIBUTE
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				PARTY_ID,
			</if>
			<if test="partyAttributes.isShowName.key != null">
				ATTR_NAME,
			</if>
			<if test="partyAttributes.isShowName.value != null">
				ATTR_VALUE,
			</if>
			<if test="partyAttributes.isShowName.creator != null">
				CREATOR,
			</if>
			<if test="partyAttributes.isShowName.createdDate != null">
				CREATED_DATE,
			</if>
			<if test="partyAttributes.isShowName.lastUpdateUser != null">
				LAST_UPDATE_USER,
			</if>
			<if test="partyAttributes.isShowName.lastUpdateDate != null">
				LAST_UPDATE_DATE,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.isShowName.key != null">
				#{partyAttributes.isShowName.key,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.isShowName.value != null">
				#{partyAttributes.isShowName.value,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.isShowName.creator != null">
				#{partyAttributes.isShowName.creator,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.isShowName.createdDate != null">
				#{partyAttributes.isShowName.createdDate,jdbcType=TIMESTAMP},
			</if>
			<if test="partyAttributes.isShowName.lastUpdateUser != null">
				#{partyAttributes.isShowName.lastUpdateUser,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.isShowName.lastUpdateDate != null">
				#{partyAttributes.isShowName.lastUpdateDate,jdbcType=TIMESTAMP},
			</if>
		</trim>
	</insert>


	<!-- 地址币种 -->
	<insert id="insertUsedCurruncy" parameterType="com.yikuyi.party.model.Party">
		insert into PARTY_ATTRIBUTE
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				PARTY_ID,
			</if>
			<if test="partyAttributes.usedCurruncy.key != null">
				ATTR_NAME,
			</if>
			<if test="partyAttributes.usedCurruncy.value != null">
				ATTR_VALUE,
			</if>
			<if test="partyAttributes.usedCurruncy.creator != null">
				CREATOR,
			</if>
			<if test="partyAttributes.usedCurruncy.createdDate != null">
				CREATED_DATE,
			</if>
			<if test="partyAttributes.usedCurruncy.lastUpdateUser != null">
				LAST_UPDATE_USER,
			</if>
			<if test="partyAttributes.usedCurruncy.lastUpdateDate != null">
				LAST_UPDATE_DATE,
			</if>
			<if test="partyAttributes.usedCurruncy.lastUpdateDate != null">
				LAST_UPDATE_DATE,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.usedCurruncy.key != null">
				#{partyAttributes.usedCurruncy.key,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.usedCurruncy.value != null">
				#{partyAttributes.usedCurruncy.value,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.usedCurruncy.creator != null">
				#{partyAttributes.usedCurruncy.creator,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.usedCurruncy.createdDate != null">
				#{partyAttributes.usedCurruncy.createdDate,jdbcType=TIMESTAMP},
			</if>
			<if test="partyAttributes.usedCurruncy.lastUpdateUser != null">
				#{partyAttributes.usedCurruncy.lastUpdateUser,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.usedCurruncy.lastUpdateDate != null">
				#{partyAttributes.usedCurruncy.lastUpdateDate,jdbcType=TIMESTAMP},
			</if>
		</trim>
	</insert>

	<select id="getPartAttribute" resultMap="BaseResultMap">
		SELECT
		ATTR_ID,ATTR_NAME,ATTR_VALUE,PARENT_ATTR_ID FROM `PARTY_ATTRIBUTE`
		WHERE
		PARTY_ID=#{id,jdbcType=VARCHAR}
	</select>

	<!-- 更新是否显示供应商名称 -->
	<update id="updateIsShowName" parameterType="com.yikuyi.party.model.Party">
		update PARTY_ATTRIBUTE
		<set>
			<if test="partyAttributes.isShowName.value != null">
				ATTR_VALUE = #{partyAttributes.isShowName.value,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.isShowName.creator != null">
				CREATOR = #{partyAttributes.isShowName.creator,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.isShowName.createdDate != null">
				CREATED_DATE = #{partyAttributes.isShowName.createdDate,jdbcType=TIMESTAMP},
			</if>
			<if test="partyAttributes.isShowName.lastUpdateUser != null">
				LAST_UPDATE_USER = #{partyAttributes.isShowName.lastUpdateUser,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.isShowName.lastUpdateDate != null">
				LAST_UPDATE_DATE = #{partyAttributes.isShowName.lastUpdateDate,jdbcType=TIMESTAMP},
			</if>
		</set>
		where ATTR_NAME = 'IS_SHOW_NAME' AND PARTY_ID = #{id,jdbcType=VARCHAR}
	</update>

	<!-- 更新是否支持价格策略 -->
	<update id="updateIsSupPrice" parameterType="com.yikuyi.party.model.Party">
		update PARTY_ATTRIBUTE
		<set>
			<if test="partyAttributes.isShowName.value != null">
				ATTR_VALUE = #{partyAttributes.isShowName.value,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.isShowName.creator != null">
				CREATOR = #{partyAttributes.isShowName.creator,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.isShowName.createdDate != null">
				CREATED_DATE = #{partyAttributes.isShowName.createdDate,jdbcType=TIMESTAMP},
			</if>
			<if test="partyAttributes.isShowName.lastUpdateUser != null">
				LAST_UPDATE_USER = #{partyAttributes.isShowName.lastUpdateUser,jdbcType=VARCHAR},
			</if>
			<if test="partyAttributes.isShowName.lastUpdateDate != null">
				LAST_UPDATE_DATE = #{partyAttributes.isShowName.lastUpdateDate,jdbcType=TIMESTAMP},
			</if>
		</set>
		where ATTR_NAME = 'IS_SUP_PRICE' AND PARTY_ID = #{id,jdbcType=VARCHAR}
	</update>
	<update id="updateEnterpriseAttribute" parameterType="com.yikuyi.party.model.Party">
		update PARTY_ATTRIBUTE
		<set>
			<if test="description != null">
				ATTR_VALUE = #{description,jdbcType=LONGVARCHAR},
			</if>
			<if test="lastUpdateUser != null">
				LAST_UPDATE_USER = #{lastUpdateUser,jdbcType=VARCHAR},
			</if>
			<if test="lastUpdateDate != null">
				LAST_UPDATE_DATE = #{lastUpdateDate,jdbcType=TIMESTAMP},
			</if>
		</set>
		where PARTY_ID = #{id,jdbcType=VARCHAR} and ATTR_NAME =
		#{externalId,jdbcType=VARCHAR}
	</update>

	<select id="getAttrByKey" resultMap="BaseResultMap">
		SELECT ATTR_NAME,ATTR_VALUE
		FROM `PARTY_ATTRIBUTE` WHERE
		PARTY_ID=#{id,jdbcType=VARCHAR} and
		ATTR_NAME=#{attrName,jdbcType=VARCHAR}
	</select>

	<delete id="deleteByIdOrKey" parameterType="com.yikuyi.party.model.Party">
		DELETE FROM `PARTY_ATTRIBUTE` WHERE `PARTY_ID`=#{id,jdbcType=VARCHAR}
		<if
			test="partyAttributes.keyList != null and partyAttributes.keyList.size() !=0">
			AND `ATTR_NAME` IN
			<foreach collection="partyAttributes.keyList" item="ids"
				index="index" open="(" close=")" separator=",">
				#{ids}
			</foreach>
		</if>
	</delete>
	<!-- 查询是否有符号条件的组织机构代码 -->
	<select id="findPartyCodeList" resultType="com.yikuyi.party.contact.vo.EnterpriseVo">
		SELECT t.`GROUP_NAME` as name,
		t3.`PARTY_ID` as id,
		t2.ATTR_VALUE as reason,
		t3.PARTY_CODE as partyCode
		FROM `PARTY_GROUP` t LEFT JOIN `PARTY_ATTRIBUTE` t2 ON t.`PARTY_ID` =
		t2.`PARTY_ID`
		LEFT JOIN `PARTY` t3 ON t.`PARTY_ID` = t3.`PARTY_ID`
		WHERE t3.`PARTY_TYPE_ID` = 'VIP_CORPORATION'
		<if test="attrName != null">
			AND t2.`ATTR_NAME` = #{attrName}
		</if>
		<if test="name != null">
			AND t.`GROUP_NAME` = #{name}
		</if>
		<if test="attrValue != null">
			AND t2.`ATTR_VALUE`= #{attrValue}
		</if>
	</select>
	<insert id="save">
		INSERT INTO PARTY_ATTRIBUTE (PARTY_ID,ATTR_NAME,ATTR_VALUE) VALUES
		(#{id},#{attrName},#{attrValue}) ON DUPLICATE KEY UPDATE
		ATTR_VALUE=#{attrValue}
	</insert>
	
	<insert id="insertVendorField" parameterType="com.yikuyi.party.model.PartyAttribute" >
  	INSERT INTO PARTY_ATTRIBUTE(
	  `PARTY_ID`,
	  `ATTR_NAME`,
	  `ATTR_VALUE`,
	  `CREATOR`,
	  `CREATED_DATE`,
	  `LAST_UPDATE_USER`,
	  `LAST_UPDATE_DATE`
	)
	VALUES                
	 <foreach collection="arrayList" item="item" index="index" separator="," >  
        (#{item.partyId},#{item.key},#{item.value},#{item.creator},#{item.createdDate},#{item.lastUpdateUser},#{item.lastUpdateDate})  
    </foreach> 
  </insert>

	<insert id="batchReplace" parameterType="com.yikuyi.party.model.PartyAttribute">
		REPLACE INTO PARTY_ATTRIBUTE(
		`PARTY_ID`,
		`ATTR_NAME`,
		`ATTR_VALUE`,
		`CREATOR`,
		`CREATED_DATE`,
		`LAST_UPDATE_USER`,
		`LAST_UPDATE_DATE`
		)
		VALUES
		<foreach collection="partyAttributeList" item="item" index="index" separator=",">
			(#{item.partyId},#{item.key},#{item.value},#{item.creator},#{item.createdDate},#{item.lastUpdateUser},#{item.lastUpdateDate})
		</foreach>
	</insert>
	
	<select id="getPartyAttributesByKeys" resultMap="BaseResultMap">
		SELECT ATTR_ID,ATTR_NAME,ATTR_VALUE,PARENT_ATTR_ID FROM `PARTY_ATTRIBUTE` WHERE PARTY_ID=#{partyId,jdbcType=VARCHAR}
		<if test="attributeKeys != null and attributeKeys.size() > 0">
			AND ATTR_NAME IN
			<foreach collection="attributeKeys" item="item" index="index" open="(" separator="," close=")">
				#{item,jdbcType=VARCHAR}
			</foreach>
		</if>
	</select>
  

  <update id="updateField" parameterType="com.yikuyi.party.model.PartyAttribute" >
     update PARTY_ATTRIBUTE SET   
		 ATTR_VALUE = #{value},		 	
   		 LAST_UPDATE_USER = #{lastUpdateUser},	
		 LAST_UPDATE_DATE = #{lastUpdateDate}	
	 where PARTY_ID = #{partyId} and ATTR_NAME = #{key}
  </update>
  
  <delete id="delByPartyIdAndName">
  delete from PARTY_ATTRIBUTE where PARTY_ID=#{partyId}
   AND ATTR_NAME IN
   <foreach collection="attributeKeys" item="item" index="index" open="(" separator="," close=")">
				#{item,jdbcType=VARCHAR}
   </foreach>
  
  </delete>
  
  	<resultMap id="BaseResultMap2" type="com.yikuyi.party.credit.model.PartyAttachment">
		<id column="PARTY_ATTACHMENT_ID" property="partyAttachmentId" />
		<result column="PARTY_ID" property="partyId" />
		<result column="ATTACHMENT_NAME" property="attachmentName" />
		<result column="ATTACHMENT_URL" property="attachmentUrl"/>
		<result column="ATTACHMENT_TYPE" property="attachmentType"/>	
		<result column="CREATOR" property="creator" />
		<result column="CREATED_DATE" property="createdDate" />
		<result column="LAST_UPDATE_USER" property="lastUpdateUser"/>
		<result column="LAST_UPDATE_DATE" property="lastUpdateDate"	/>
   </resultMap>
   
   <select id="findAttrchmentList"  resultMap="BaseResultMap2" parameterType="java.lang.String">
   		select * from PARTY_ATTACHMENT p where p.PARTY_ID = #{partyId}
   		<if test="attachmentType != null" > 
   		and p.ATTACHMENT_TYPE = #{attachmentType}
   		</if>
   </select>

</mapper>